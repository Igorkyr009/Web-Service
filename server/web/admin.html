<!doctype html><html lang="uk"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>Адмінка</title>
<style>
 body{font-family:system-ui,sans-serif;margin:0 auto;max-width:820px;padding:16px}
 input,textarea{width:100%;padding:8px;margin:6px 0 12px;border:1px solid #ddd;border-radius:6px}
 .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
 button{padding:10px 12px;border-radius:8px;border:1px solid #ddd;background:#0ea5e9;color:#fff;cursor:pointer}
 .muted{color:#666;font-size:12px}
</style>
<body>
  <h2>Адмін-панель</h2>
  <p class="muted">Введи секрет з Render (ENV <b>ADMIN_SECRET</b>). Він збережеться у браузері.</p>
  <label>Admin Secret</label><input id="sec" placeholder="секрет">

  <hr><h3>Створити / оновити товар</h3>
  <label>SKU</label><input id="sku" placeholder="унікальний код (coffee_1kg)">
  <label>Назва</label><input id="title" placeholder="Назва товару">
  <div class="row">
    <div><label>Ціна</label><input id="price" type="number" placeholder="1299"></div>
    <div><label>Валюта</label><input id="cur" value="UAH"></div>
  </div>
  <label>Категорія</label><input id="cat">
  <label>Зображення (URL)</label><input id="img" placeholder="https://...">
  <label>Опис</label><textarea id="desc" rows="4"></textarea>
  <label><input type="checkbox" id="active" checked> Активний</label>
  <button id="save">Зберегти</button>

<script>
 const sec = document.getElementById('sec');
 sec.value = localStorage.getItem('admin_secret') || '';
 sec.oninput = () =><script>
  const sec = document.getElementById('sec');
  sec.value = localStorage.getItem('admin_secret') || '';
  sec.oninput = () => localStorage.setItem('admin_secret', sec.value);

  const $ = id => document.getElementById(id);

  document.getElementById('save').onclick = async () => {
    const payload = {
      sku: $('sku').value.trim(),
      title: $('title').value.trim(),
      price: parseInt($('price').value || '0', 10),
      currency: $('cur').value.trim() || 'UAH',
      category: $('cat').value.trim(),
      image_url: $('img').value.trim(),
      description: $('desc').value.trim(),
      is_active: $('active').checked
    };

    if (!sec.value || !payload.sku || !payload.title || !payload.price) {
      alert('Заповни SECRET, SKU, Назву і Ціну'); return;
    }

    const res = await fetch('/api/admin/products', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Admin-Secret': sec.value
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      alert('Помилка: ' + (await res.text()));
    } else {
      alert('✅ Збережено');
    }
  };
</script>


   

