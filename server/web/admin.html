<!doctype html><html lang="uk"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>–ê–¥–º—ñ–Ω–∫–∞</title>
<style>
 body{font-family:system-ui,sans-serif;margin:0 auto;max-width:820px;padding:16px}
 input,textarea{width:100%;padding:8px;margin:6px 0 12px;border:1px solid #ddd;border-radius:6px}
 .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
 button{padding:10px 12px;border-radius:8px;border:1px solid #ddd;background:#0ea5e9;color:#fff;cursor:pointer}
 .muted{color:#666;font-size:12px}
</style>
<body>
  <h2>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h2>
  <p class="muted">–í–≤–µ–¥–∏ —Å–µ–∫—Ä–µ—Ç –∑ Render (ENV <b>ADMIN_SECRET</b>). –í—ñ–Ω –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è —É –±—Ä–∞—É–∑–µ—Ä—ñ.</p>
  <label>Admin Secret</label><input id="sec" placeholder="—Å–µ–∫—Ä–µ—Ç">

  <hr><h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ / –æ–Ω–æ–≤–∏—Ç–∏ —Ç–æ–≤–∞—Ä</h3>
  <label>SKU</label><input id="sku" placeholder="—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–¥ (coffee_1kg)">
  <label>–ù–∞–∑–≤–∞</label><input id="title" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É">
  <div class="row">
    <div><label>–¶—ñ–Ω–∞</label><input id="price" type="number" placeholder="1299"></div>
    <div><label>–í–∞–ª—é—Ç–∞</label><input id="cur" value="UAH"></div>
  </div>
  <label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><input id="cat">
  <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (URL)</label><input id="img" placeholder="https://...">
  <label>–û–ø–∏—Å</label><textarea id="desc" rows="4"></textarea>
  <label><input type="checkbox" id="active" checked> –ê–∫—Ç–∏–≤–Ω–∏–π</label>
  <button id="save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
<!doctype html><html lang="uk"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>–ê–¥–º—ñ–Ω–∫–∞</title>
<style>
  body{font-family:system-ui,sans-serif;margin:0 auto;max-width:820px;padding:16px}
  input,textarea{width:100%;padding:8px;margin:6px 0 12px;border:1px solid #ddd;border-radius:6px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  button{padding:10px 12px;border-radius:8px;border:1px solid #ddd;background:#0ea5e9;color:#fff;cursor:pointer}
  .muted{color:#666;font-size:12px}
</style>
<body>
  <h2>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h2>
  <p class="muted">–í–≤–µ–¥–∏ —Å–µ–∫—Ä–µ—Ç –∑ Render (ENV <b>ADMIN_SECRET</b>). –í—ñ–Ω –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è —É –±—Ä–∞—É–∑–µ—Ä—ñ.</p>

  <label>Admin Secret</label>
  <input id="sec" placeholder="—Å–µ–∫—Ä–µ—Ç">

  <hr><h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ / –æ–Ω–æ–≤–∏—Ç–∏ —Ç–æ–≤–∞—Ä</h3>
  <label>SKU</label><input id="sku" placeholder="—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–¥ (coffee_1kg)">
  <label>–ù–∞–∑–≤–∞</label><input id="title" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É">
  <div class="row">
    <div><label>–¶—ñ–Ω–∞</label><input id="price" type="number" placeholder="1299"></div>
    <div><label>–í–∞–ª—é—Ç–∞</label><input id="cur" value="UAH"></div>
  </div>
  <label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><input id="cat">
  <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (URL)</label><input id="img" placeholder="https://...">
  <label>–û–ø–∏—Å</label><textarea id="desc" rows="4"></textarea>
  <label><input type="checkbox" id="active" checked> –ê–∫—Ç–∏–≤–Ω–∏–π</label>
  <button id="save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
<button id="del" style="margin-left:8px;background:#ef4444">üóë –í–∏–¥–∞–ª–∏—Ç–∏</button>


<script>
  const sec = document.getElementById('sec');
  sec.value = localStorage.getItem('admin_secret') || '';
  sec.oninput = () => localStorage.setItem('admin_secret', sec.value);

  const $ = id => document.getElementById(id);

  document.getElementById('save').onclick = async () => {
    const payload = {
      sku: $('sku').value.trim(),
      title: $('title').value.trim(),
      price: parseInt($('price').value || '0', 10),
      currency: $('cur').value.trim() || 'UAH',
      category: $('cat').value.trim(),
      image_url: $('img').value.trim(),
      description: $('desc').value.trim(),
      is_active: $('active').checked
    };

    if (!sec.value || !payload.sku || !payload.title || !payload.price) {
      alert('–ó–∞–ø–æ–≤–Ω–∏ SECRET, SKU, –ù–∞–∑–≤—É —ñ –¶—ñ–Ω—É'); return;
    }

    try {
      const res = await fetch('/api/admin/products', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'X-Admin-Secret': sec.value },
        body: JSON.stringify(payload)
      });
      if (!res.ok) {
        const text = await res.text();
        alert('–ü–æ–º–∏–ª–∫–∞: ' + text);
      } else {
        alert('‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ');
      }
    } catch (e) {
      alert('–ú–µ—Ä–µ–∂–Ω–∞ –ø–æ–º–∏–ª–∫–∞: ' + e);
    }
  };
</script>
</body></html>

<script>
 const sec = document.getElementById('sec');
 sec.value = localStorage.getItem('admin_secret') || '';
 sec.oninput = () =><script>
  const sec = document.getElementById('sec');
  sec.value = localStorage.getItem('admin_secret') || '';
  sec.oninput = () => localStorage.setItem('admin_secret', sec.value);

  const $ = id => document.getElementById(id);

  document.getElementById('save').onclick = async () => {
    const payload = {
      sku: $('sku').value.trim(),
      title: $('title').value.trim(),
      price: parseInt($('price').value || '0', 10),
      currency: $('cur').value.trim() || 'UAH',
      category: $('cat').value.trim(),
      image_url: $('img').value.trim(),
      description: $('desc').value.trim(),
      is_active: $('active').checked
    };

    if (!sec.value || !payload.sku || !payload.title || !payload.price) {
      alert('–ó–∞–ø–æ–≤–Ω–∏ SECRET, SKU, –ù–∞–∑–≤—É —ñ –¶—ñ–Ω—É'); return;
    }

    const res = await fetch('/api/admin/products', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Admin-Secret': sec.value
      },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      alert('–ü–æ–º–∏–ª–∫–∞: ' + (await res.text()));
    } else {
      alert('‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ');
    }
  };
</script>


   




