<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Адмінка</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 0 auto; padding: 16px; max-width: 800px; }
    input, textarea { width: 100%; padding: 8px; margin: 6px 0 12px; border:1px solid #ddd; border-radius:6px; }
    button { padding:10px 12px; border-radius:8px; border:1px solid #ddd; background:#0ea5e9; color:#fff; cursor:pointer; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .muted { color:#666; font-size:12px; }
  </style>
</head>
<body>
  <h2>Адмін-панель</h2>
  <div class="muted">Введи секрет і адресу API. Секрет задається на Render у <b>ADMIN_SECRET</b>.</div>
  <div class="row">
    <div>
      <label>API Base</label>
      <input id="api" placeholder="https://YOUR-RENDER.onrender.com" />
    </div>
    <div>
      <label>Admin Secret</label>
      <input id="sec" placeholder="секрет" />
    </div>
  </div>
  <hr/>
  <h3>Створити/оновити товар</h3>
  <label>SKU</label><input id="sku" />
  <label>Назва</label><input id="title" />
  <div class="row">
    <div><label>Ціна</label><input id="price" type="number" /></div>
    <div><label>Валюта</label><input id="cur" value="UAH" /></div>
  </div>
  <label>Категорія</label><input id="cat" />
  <label>Зображення (URL)</label><input id="img" />
  <label>Опис</label><textarea id="desc" rows="4"></textarea>
  <div style="margin-top:8px;">
    <label><input type="checkbox" id="active" checked /> Активний</label>
  </div>
  <button id="save">Зберегти</button>

  <script>
    const api = document.getElementById('api');
    const sec = document.getElementById('sec');
    document.getElementById('save').onclick = async () => {
      const base = api.value.trim();
      const secret = sec.value.trim();
      const body = {
        sku: document.getElementById('sku').value.trim(),
        title: document.getElementById('title').value.trim(),
        price: parseInt(document.getElementById('price').value || '0', 10),
        currency: document.getElementById('cur').value.trim() || 'UAH',
        category: document.getElementById('cat').value.trim(),
        image_url: document.getElementById('img').value.trim(),
        description: document.getElementById('desc').value.trim(),
        is_active: document.getElementById('active').checked
      };
      const r = await fetch(`${base}/api/admin/products`, {
        method: 'POST',
        headers: { 'Content-Type':'application/json', 'X-Admin-Secret': secret },
        body: JSON.stringify(body)
      });
      if (!r.ok) {
        alert('Помилка: ' + await r.text());
      } else {
        alert('Збережено ✔');
      }
    };
  </script>
</body>
</html>
